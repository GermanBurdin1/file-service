# üìÅ –†–µ–∂–∏–º—ã —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤ –≤ File Service

File Service –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –¥–≤–∞ —Ä–µ–∂–∏–º–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤:
- **–õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ** (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) - —Ñ–∞–π–ª—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ø–∞–ø–∫—É `uploads/`
- **AWS S3** - —Ñ–∞–π–ª—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ Amazon S3 bucket

## üîß –¢–µ–∫—É—â–∏–π —Ä–µ–∂–∏–º: –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (.env)
```env
# –†–µ–∂–∏–º —Ö—Ä–∞–Ω–µ–Ω–∏—è: 'local' –∏–ª–∏ 'aws'
STORAGE_MODE=local

# PostgreSQL Database
DB_HOST=localhost
DB_PORT=5432
DB_USER=postgres
DB_PASS=your_password
DB_NAME=file_service_db
PORT=3008
```

## üîÑ –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ AWS S3

### 1. –û–±–Ω–æ–≤–∏—Ç—å .env —Ñ–∞–π–ª
```env
# –ò–∑–º–µ–Ω–∏—Ç—å —Ä–µ–∂–∏–º –Ω–∞ AWS
STORAGE_MODE=aws

# –î–æ–±–∞–≤–∏—Ç—å AWS –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
AWS_REGION=your-region
AWS_ACCESS_KEY_ID=your-access-key
AWS_SECRET_ACCESS_KEY=your-secret-key
AWS_S3_BUCKET_NAME=your-bucket-name

# PostgreSQL –æ—Å—Ç–∞–µ—Ç—Å—è
DB_HOST=localhost
DB_PORT=5432
DB_USER=postgres
DB_PASS=your_password
DB_NAME=file_service_db
PORT=3008
```

### 2. –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å AWS –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤ package.json
```json
{
  "dependencies": {
    "@aws-sdk/client-s3": "^3.758.0",
    "multer-s3": "^3.0.1"
  }
}
```

### 3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å AWS –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```bash
npm install @aws-sdk/client-s3@^3.758.0 multer-s3@^3.0.1
```

### 4. –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å AWS –∫–æ–¥ –≤ file.service.ts
- –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–º–ø–æ—Ä—Ç—ã AWS SDK
- –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ S3 –∫–ª–∏–µ–Ω—Ç–∞
- –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å AWS –∫–æ–¥ –≤ –º–µ—Ç–æ–¥–µ uploadFile()
- –£–¥–∞–ª–∏—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—É—é –∑–∞–≥–ª—É—à–∫—É —Å throw Error

### 5. –ó–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Å—Ç–∞—Ç–∏—á–µ—Å–∫—É—é –ø–æ–¥–∞—á—É –≤ main.ts
```typescript
// app.useStaticAssets(join(__dirname, '..', 'uploads'), {
//   prefix: '/uploads/',
// });
```

### 6. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å
```bash
npm run start:dev
```

## üîÑ –í–æ–∑–≤—Ä–∞—Ç –∫ –ª–æ–∫–∞–ª—å–Ω–æ–º—É —Ö—Ä–∞–Ω–µ–Ω–∏—é

### 1. –ò–∑–º–µ–Ω–∏—Ç—å .env
```env
STORAGE_MODE=local
# –£–±—Ä–∞—Ç—å AWS –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
```

### 2. –ó–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å AWS –∫–æ–¥ –≤ file.service.ts

### 3. –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Å—Ç–∞—Ç–∏—á–µ—Å–∫—É—é –ø–æ–¥–∞—á—É –≤ main.ts

### 4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å

## üìã –¢–µ–∫—É—â–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### ‚úÖ –ê–∫—Ç–∏–≤–Ω–æ (–õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ)
- ‚úÖ PostgreSQL –¥–ª—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
- ‚úÖ –õ–æ–∫–∞–ª—å–Ω–∞—è –ø–∞–ø–∫–∞ `uploads/` –¥–ª—è —Ñ–∞–π–ª–æ–≤
- ‚úÖ –°—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–æ–¥–∞—á–∞ —á–µ—Ä–µ–∑ Express
- ‚úÖ URL —Ñ–æ—Ä–º–∞—Ç: `http://localhost:3008/uploads/filename`

### üí§ –ì–æ—Ç–æ–≤–æ –∫ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ (AWS S3)
- üí§ AWS SDK –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω –≤ –∫–æ–¥–µ
- üí§ S3 –∫–ª–∏–µ–Ω—Ç –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω
- üí§ AWS –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤ `_aws_dependencies_commented`
- üí§ URL —Ñ–æ—Ä–º–∞—Ç: `https://bucket.s3.amazonaws.com/uploads/filename`

## üéØ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –ø–æ–¥—Ö–æ–¥–æ–≤

### –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ
- ‚úÖ –ë—ã—Å—Ç—Ä–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
- ‚úÖ –ù–µ—Ç –∑–∞—Ç—Ä–∞—Ç –Ω–∞ S3
- ‚úÖ –ü—Ä–æ—Å—Ç–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
- ‚ùå –ù–µ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è
- ‚ùå –ù–µ—Ç —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è

### AWS S3
- ‚úÖ –í—ã—Å–æ–∫–∞—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ CDN –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- ‚úÖ –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å
- ‚ùå –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞—Ç—Ä–∞—Ç—ã
- ‚ùå –¢—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ AWS 